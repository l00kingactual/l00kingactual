# Spiral
spiral = [
    {"matrix": [[0.935567, -0.164966], [0.164966, 0.935567]], "translation": [0.0, 0.0], "probability": 0.919682},
    {"matrix": [[0.1, 0.0], [0.0, 0.1]], "translation": [0.75, -0.75], "probability": 0.020080},
    {"matrix": [[0.1, 0.0], [0.0, 0.1]], "translation": [-0.75, 0.75], "probability": 0.020080},
    {"matrix": [[0.1, 0.0], [0.0, 0.1]], "translation": [0.75, 0.75], "probability": 0.020080},
    {"matrix": [[0.1, 0.0], [0.0, 0.1]], "translation": [-0.75, -0.75], "probability": 0.020080}
]

# Crab
crab = [
    {"matrix": [[0.5, 0.2], [0.0, 0.5]], "translation": [0.0, 0.0], "probability": 0.25},
    {"matrix": [[-0.5, 0.0], [0.2, 0.5]], "translation": [1.0, 0.0], "probability": 0.25},
    {"matrix": [[0.5, 0.2], [0.0, -0.5]], "translation": [0.0, 1.0], "probability": 0.25},
    {"matrix": [[-0.5, 0.0], [-0.2, -0.5]], "translation": [1.0, 1.0], "probability": 0.25}
]

# Eiffel Tower
eiffel_tower = [
    {"matrix": [[0.5, 0.0], [0.0, 0.3]], "translation": [0.0, 0.0], "probability": 0.246154},
    {"matrix": [[0.5, 0.0], [0.0, 0.3]], "translation": [0.5, 0.0], "probability": 0.246154},
    {"matrix": [[0.5, 0.0], [0.0, 0.7]], "translation": [0.25, 0.3], "probability": 0.507692}
]

# Fern
fern = [
    {"matrix": [[0.0, 0.0], [0.0, 0.172033]], "translation": [0.496139, -0.09051], "probability": 0.01},
    {"matrix": [[0.075906, 0.312285], [-0.257105, 0.204233]], "translation": [0.494173, 0.132616], "probability": 0.075},
    {"matrix": [[0.82113, -0.028405], [0.029799, 0.84528]], "translation": [0.087877, 0.175709], "probability": 0.84},
    {"matrix": [[-0.023936, -0.356062], [-0.323405, 0.074403]], "translation": [0.470356, 0.259738], "probability": 0.075}
]

# Spiral 2
spiral_2 = [
    {"matrix": [[0.143268, 0.37263], [0.0, 0.411999]], "translation": [-0.424035, 0.228385], "probability": 0.05},
    {"matrix": [[0.817528, -0.472], [0.472, 0.817528]], "translation": [-0.06, 0.051538], "probability": 0.95}
]

# Leaf
leaf = [
    {"matrix": [[0.5, 0.0], [0.0, 0.759127]], "translation": [0.0, 0.542236], "probability": 0.423635},
    {"matrix": [[0.001, 0.0], [0.0, 0.272]], "translation": [0.0, 0.0], "probability": 0.05},
    {"matrix": [[0.437567, 0.397819], [-0.086824, 0.492404]], "translation": [-0.001575, 0.428276], "probability": 0.263},
    {"matrix": [[-0.437567, -0.397819], [-0.086824, 0.492404]], "translation": [-0.003556, 0.434301], "probability": 0.263}
]

# Tree
tree = [
    {"matrix": [[0.458805, -0.225654], [0.072682, 0.60187]], "translation": [-0.001772, 0.319478], "probability": 0.31},
    {"matrix": [[0.342683, 0.37561], [-0.203368, 0.54642]], "translation": [-0.022095, 0.329764], "probability": 0.2},
    {"matrix": [[0.135817, 0.502731], [-0.313469, 0.138456]], "translation": [-0.020039, 0.217063], "probability": 0.16},
    {"matrix": [[0.253255, -0.489749], [0.307978, 0.349892]], "translation": [-0.007397, 0.198101], "probability": 0.23},
    {"matrix": [[0.066406, 0.0], [0.0, 0.479424]], "translation": [-0.014923, -0.024215], "probability": 0.1}
]

# Nautilus
nautilus = [
    {"matrix": [[0.860671, 0.401487], [-0.402177, 0.860992]], "translation": [0.108537, 0.075138], "probability": 0.93},
    {"matrix": [[0.094957, -0.000995], [0.237023, 0.002036]], "translation": [-0.746911, 0.047343], "probability": 0.02},
    {"matrix": [[0.150288, 0.0], [0.0, 0.146854]], "translation": [-0.563199, 0.032007], "probability": 0.03},
    {"matrix": [[0.324279, -0.002163], [0.005846, 0.001348]], "translation": [-0.557936, -0.139735], "probability": 0.02}
]

# Pine Tree
pine_tree = [
    {"matrix": [[0.797881, 0.0], [0.0, 0.833333]], "translation": [0.097828, 0.168721], "probability": 0.75},
    {"matrix": [[-0.131628, -0.366787], [0.399144, -0.140643]], "translation": [0.500098, 0.180655], "probability": 0.1},
    {"matrix": [[0.099649, 0.403824], [0.408196, -0.10033]], "translation": [0.364628, 0.15777], "probability": 0.1},
    {"matrix": [[0.04918, 0.0], [0.0, 0.333333]], "translation": [0.398795, 0.009695], "probability": 0.05}
]

# Spiral 3
spiral_3 = [
    {"matrix": [[0.25, 0.0], [0.0, 0.25]], "translation": [0.0, 0.5], "probability": 0.073459},
    {"matrix": [[0.822978, -0.475], [0.474955, 0.822724]], "translation": [0.30114, -0.173839], "probability": 0.926541}
]

# Square Snowflake
square_snowflake = [
    {"matrix": [[-0.5, 0.0], [0.0, -0.5]], "translation": [1.0, 1.0], "probability": 0.33},
    {"matrix": [[0.5, 0.0], [0.0, -0.5]], "translation": [-1.0, 1.0], "probability": 0.33},
    {"matrix": [[-0.5, 0.0], [0.0, 0.5]], "translation": [1.0, 0.0], "probability": 0.34}
]

# Starfish
starfish = [
    {"matrix": [[0.25, 0.0], [0.0, 0.25]], "translation": [0.0, 0.5], "probability": 0.080201},
    {"matrix": [[0.727742, -0.610648], [0.610648, 0.727742]], "translation": [0.416453, -0.194195], "probability": 0.92}
]

import numpy as np
import matplotlib.pyplot as plt
import tkinter as tk
from tkinter import ttk
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg

# Fractal dictionaries
fractals = {
    "Spiral": spiral,
    "Crab": crab,
    "Eiffel Tower": eiffel_tower,
    "Fern": fern,
    "Spiral 2": spiral_2,
    "Leaf": leaf,
    "Tree": tree,
    "Nautilus": nautilus,
    "Pine Tree": pine_tree,
    "Spiral 3": spiral_3,
    "Square Snowflake": square_snowflake,
    "Starfish": starfish
}

def plot_fractal():
    try:
        fractal_choice = fractal_var.get()
        fractal_data = fractals[fractal_choice]
        
        fig, ax = plt.subplots(figsize=(6, 6))  # Adjust the size of the plot
        
        # Plot each transformation
        for i, transform in enumerate(fractal_data):
            matrix = np.array(transform["matrix"])
            translation = np.array(transform["translation"])
            
            # Apply transformation matrix
            transformed_points = np.dot(matrix, points) + translation.reshape(2,1)
            
            # Plot transformed points
            ax.plot(transformed_points[0], transformed_points[1], 'o', markersize=1, label=f"Transformation {i+1}")  # Label each transformation
        
        ax.set_aspect('equal', adjustable='box')
        ax.axis('off')
        ax.legend()  # Add legend
        
        canvas = FigureCanvasTkAgg(fig, master=frame)
        canvas.draw()
        canvas.get_tk_widget().grid(row=1, column=0, padx=10, pady=10)
        
        plt.show()  # Show the plot
        
        # Update the Tkinter window
        root.update()
        
        print("Plotting completed successfully.")
    except Exception as e:
        print(f"An error occurred during plotting: {e}")

# Create main window
root = tk.Tk()
root.title("Fractal Explorer")

# Create frame for UI elements
frame = tk.Frame(root)
frame.pack(padx=10, pady=10)

# Create dropdown menu
fractal_var = tk.StringVar()
fractal_var.set("Spiral")
fractal_menu = ttk.Combobox(frame, textvariable=fractal_var, values=list(fractals.keys()))
fractal_menu.grid(row=0, column=0, padx=10, pady=10)
fractal_menu.bind("<<ComboboxSelected>>", lambda event: plot_fractal())

# Generate points to plot
x = np.linspace(-1, 1, 1000)
y = np.linspace(-1, 1, 1000)
points = np.array([x, y])

# Plot default fractal
plot_fractal()

# Start tkinter main loop
root.mainloop()
